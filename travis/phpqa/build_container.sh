#!/bin/bash

_PHP=${PHPQA_PHP_VERSION}

_php="7.1.7"
_sha256="0d42089729be7b2bb0308cbe189c2782f9cb4b07078c8a235495be5874fff729"
_gpg="A917B1ECDA84AEC2B568FED6F50ABC807BD5DCD0 528995BFEDFBA7191D46839EF9BA0ADA31CBD89E"

if [ ${_PHP} = "7.0.33" ]; then
    _php=${_PHP}
    _sha256="ab8c5be6e32b1f8d032909dedaaaa4bbb1a209e519abb01a52ce3914f9a13d96"
    _gpg="1A4E8B7277C42E53DBA9C7B9BCAA30EA9C0D5763 6E4F6AB321FDC07F2C332E3AC2BF0BC433CFC8B3"
elif [ ${_PHP} = "7.1.7" ]; then
    _php=${_PHP}
    _sha256="0d42089729be7b2bb0308cbe189c2782f9cb4b07078c8a235495be5874fff729"
    _gpg="A917B1ECDA84AEC2B568FED6F50ABC807BD5DCD0 528995BFEDFBA7191D46839EF9BA0ADA31CBD89E"
elif [ ${_PHP} = "7.2.20" ]; then
    _php=${_PHP}
    _sha256="eff09da83e235c2ba25c85deea1d4f663bd71d50fd51ad11e1acebe26d733494"
    _gpg="1729F83938DA44E27BA0F4D3DBDB397470D12172 B1B44D8F021E4E2D6021E995DC9FF8D3EE5AF27F CBAF69F173A0FEA4B537F470D66C9593118BCCB6"
elif [ ${_PHP} = "7.3.7" ]; then
    _php=${_PHP}
    _sha256="ba067200ba649956b3a92ec8b71a6ed8ce8a099921212443c1bcf3260a29274c"
    _gpg="CBAF69F173A0FEA4B537F470D66C9593118BCCB6 F38252826ACD957EF380D39F2F7956BC5DA04B5D"
fi

echo "build php ${_php} ${_sha256}"
docker build --build-arg BUILD_PHP_VERSION=${_php} --build-arg BUILD_PHP_SHA256=${_sha256} --build-arg BUILD_GPG_KEYS="${_gpg}" . -t secp256k1-${_php}